import{g as Q,t as G,af as V,ag as Et,b as ie,ah as Qe,a as Ce,f as pe,M as At,ai as Pe,v as m,z as Me,aj as Ve,e as tt,ak as It,j as lt,a1 as Y,L as Lt,al as tn,am as I,a2 as Ge,an as Ee,G as en,r as nn,ao as sn,p as rn,ap as on,_ as w,i as an,u as we,l as Fe,E as xe,a4 as ln,aq as hn,x as cn}from"./extent.Bfhaj3Ov.js";function bi(i,t){return i[0]+=+t[0],i[1]+=+t[1],i}function un(i,t){const e=i[0],n=i[1],s=t[0],r=t[1],o=s[0],a=s[1],l=r[0],h=r[1],c=l-o,u=h-a,g=c===0&&u===0?0:(c*(e-o)+u*(n-a))/(c*c+u*u||0);let f,d;return g<=0?(f=o,d=a):g>=1?(f=l,d=h):(f=o+g*c,d=a+g*u),[f,d]}function gn(i,t){let e=!0;for(let n=i.length-1;n>=0;--n)if(i[n]!=t[n]){e=!1;break}return e}function Xi(i,t){const e=Math.cos(t),n=Math.sin(t),s=i[0]*e-i[1]*n,r=i[1]*e+i[0]*n;return i[0]=s,i[1]=r,i}function Oi(i,t){return i[0]*=t,i[1]*=t,i}function Re(i,t){const e=i[0]-t[0],n=i[1]-t[1];return e*e+n*n}function Yi(i,t){return Math.sqrt(Re(i,t))}function ki(i,t){return Re(i,un(i,t))}function Ui(i,t){if(t.canWrapX()){const e=Q(t.getExtent()),n=Se(i,t,e);n&&(i[0]-=n*e)}return i}function Se(i,t,e){const n=t.getExtent();let s=0;return t.canWrapX()&&(i[0]<n[0]||i[0]>n[2])&&(e=e||Q(n),s=Math.floor((i[0]-n[0])/e)),s}const ht=63710088e-1;function wt(i,t,e){e=e||ht;const n=G(i[1]),s=G(t[1]),r=(s-n)/2,o=G(t[0]-i[0])/2,a=Math.sin(r)*Math.sin(r)+Math.sin(o)*Math.sin(o)*Math.cos(n)*Math.cos(s);return 2*e*Math.atan2(Math.sqrt(a),Math.sqrt(1-a))}function pt(i,t){let e=0;for(let n=0,s=i.length;n<s-1;++n)e+=wt(i[n],i[n+1],t);return e}function fn(i,t){t=t||{};const e=t.radius||ht,n=t.projection||"EPSG:3857",s=i.getType();s!=="GeometryCollection"&&(i=i.clone().transform(n,"EPSG:4326"));let r=0,o,a,l,h,c,u;switch(s){case"Point":case"MultiPoint":break;case"LineString":case"LinearRing":{o=i.getCoordinates(),r=pt(o,e);break}case"MultiLineString":case"Polygon":{for(o=i.getCoordinates(),l=0,h=o.length;l<h;++l)r+=pt(o[l],e);break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,h=o.length;l<h;++l)for(a=o[l],c=0,u=a.length;c<u;++c)r+=pt(a[c],e);break}case"GeometryCollection":{const g=i.getGeometries();for(l=0,h=g.length;l<h;++l)r+=fn(g[l],t);break}default:throw new Error("Unsupported geometry type: "+s)}return r}function z(i,t){let e=0;const n=i.length;let s=i[n-1][0],r=i[n-1][1];for(let o=0;o<n;o++){const a=i[o][0],l=i[o][1];e+=G(a-s)*(2+Math.sin(G(r))+Math.sin(G(l))),s=a,r=l}return e*t*t/2}function dn(i,t){t=t||{};const e=t.radius||ht,n=t.projection||"EPSG:3857",s=i.getType();s!=="GeometryCollection"&&(i=i.clone().transform(n,"EPSG:4326"));let r=0,o,a,l,h,c,u;switch(s){case"Point":case"MultiPoint":case"LineString":case"MultiLineString":case"LinearRing":break;case"Polygon":{for(o=i.getCoordinates(),r=Math.abs(z(o[0],e)),l=1,h=o.length;l<h;++l)r-=Math.abs(z(o[l],e));break}case"MultiPolygon":{for(o=i.getCoordinates(),l=0,h=o.length;l<h;++l)for(a=o[l],r+=Math.abs(z(a[0],e)),c=1,u=a.length;c<u;++c)r-=Math.abs(z(a[c],e));break}case"GeometryCollection":{const g=i.getGeometries();for(l=0,h=g.length;l<h;++l)r+=dn(g[l],t);break}default:throw new Error("Unsupported geometry type: "+s)}return r}function yn(i,t,e,n){n=n||ht;const s=G(i[1]),r=G(i[0]),o=t/n,a=Math.asin(Math.sin(s)*Math.cos(o)+Math.cos(s)*Math.sin(o)*Math.cos(e)),l=r+Math.atan2(Math.sin(e)*Math.sin(o)*Math.cos(s),Math.cos(o)-Math.sin(s)*Math.sin(a));return[V(l),V(a)]}function mn(...i){console.warn(...i)}const Ft={radians:6370997/(2*Math.PI),degrees:2*Math.PI*6370997/360,ft:.3048,m:1,"us-ft":1200/3937};class Nt{constructor(t){this.code_=t.code,this.units_=t.units,this.extent_=t.extent!==void 0?t.extent:null,this.worldExtent_=t.worldExtent!==void 0?t.worldExtent:null,this.axisOrientation_=t.axisOrientation!==void 0?t.axisOrientation:"enu",this.global_=t.global!==void 0?t.global:!1,this.canWrapX_=!!(this.global_&&this.extent_),this.getPointResolutionFunc_=t.getPointResolution,this.defaultTileGrid_=null,this.metersPerUnit_=t.metersPerUnit}canWrapX(){return this.canWrapX_}getCode(){return this.code_}getExtent(){return this.extent_}getUnits(){return this.units_}getMetersPerUnit(){return this.metersPerUnit_||Ft[this.units_]}getWorldExtent(){return this.worldExtent_}getAxisOrientation(){return this.axisOrientation_}isGlobal(){return this.global_}setGlobal(t){this.global_=t,this.canWrapX_=!!(t&&this.extent_)}getDefaultTileGrid(){return this.defaultTileGrid_}setDefaultTileGrid(t){this.defaultTileGrid_=t}setExtent(t){this.extent_=t,this.canWrapX_=!!(this.global_&&t)}setWorldExtent(t){this.worldExtent_=t}setGetPointResolution(t){this.getPointResolutionFunc_=t}getPointResolutionFunc(){return this.getPointResolutionFunc_}}const K=6378137,O=Math.PI*K,_n=[-O,-O,O,O],Cn=[-180,-85,180,85],H=K*Math.log(Math.tan(Math.PI/2));class b extends Nt{constructor(t){super({code:t,units:"m",extent:_n,global:!0,worldExtent:Cn,getPointResolution:function(e,n){return e/Math.cosh(n[1]/K)}})}}const se=[new b("EPSG:3857"),new b("EPSG:102100"),new b("EPSG:102113"),new b("EPSG:900913"),new b("http://www.opengis.net/def/crs/EPSG/0/3857"),new b("http://www.opengis.net/gml/srs/epsg.xml#3857")];function pn(i,t,e,n){const s=i.length;e=e>1?e:2,n=n??e,t===void 0&&(e>2?t=i.slice():t=new Array(s));for(let r=0;r<s;r+=n){t[r]=O*i[r]/180;let o=K*Math.log(Math.tan(Math.PI*(+i[r+1]+90)/360));o>H?o=H:o<-H&&(o=-H),t[r+1]=o}return t}function Pn(i,t,e,n){const s=i.length;e=e>1?e:2,n=n??e,t===void 0&&(e>2?t=i.slice():t=new Array(s));for(let r=0;r<s;r+=n)t[r]=180*i[r]/O,t[r+1]=360*Math.atan(Math.exp(i[r+1]/K))/Math.PI-90;return t}const Mn=6378137,re=[-180,-90,180,90],Gn=Math.PI*Mn/180;class S extends Nt{constructor(t,e){super({code:t,units:"degrees",extent:re,axisOrientation:e,global:!0,metersPerUnit:Gn,worldExtent:re})}}const oe=[new S("CRS:84"),new S("EPSG:4326","neu"),new S("urn:ogc:def:crs:OGC:1.3:CRS84"),new S("urn:ogc:def:crs:OGC:2:84"),new S("http://www.opengis.net/def/crs/OGC/1.3/CRS84"),new S("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new S("http://www.opengis.net/def/crs/EPSG/0/4326","neu")];let xt={};function En(i){return xt[i]||xt[i.replace(/urn:(x-)?ogc:def:crs:EPSG:(.*:)?(\w+)$/,"EPSG:$3")]||null}function wn(i,t){xt[i]=t}let k={};function j(i,t,e){const n=i.getCode(),s=t.getCode();n in k||(k[n]={}),k[n][s]=e}function Pt(i,t){return i in k&&t in k[i]?k[i][t]:null}const et=.9996,E=.00669438,ct=E*E,ut=ct*E,T=E/(1-E),ae=Math.sqrt(1-E),U=(1-ae)/(1+ae),Te=U*U,bt=Te*U,Xt=bt*U,ve=Xt*U,je=1-E/4-3*ct/64-5*ut/256,Fn=3*E/8+3*ct/32+45*ut/1024,xn=15*ct/256+45*ut/1024,Rn=35*ut/3072,Sn=3/2*U-27/32*bt+269/512*ve,Tn=21/16*Te-55/32*Xt,vn=151/96*bt-417/128*ve,jn=1097/512*Xt,nt=6378137;function An(i,t,e){const n=i-5e5,o=(e.north?t:t-1e7)/et/(nt*je),a=o+Sn*Math.sin(2*o)+Tn*Math.sin(4*o)+vn*Math.sin(6*o)+jn*Math.sin(8*o),l=Math.sin(a),h=l*l,c=Math.cos(a),u=l/c,g=u*u,f=g*g,d=1-E*h,y=Math.sqrt(1-E*h),C=nt/y,P=(1-E)/d,_=T*c**2,F=_*_,M=n/(C*et),R=M*M,W=R*M,ee=W*M,ne=ee*M,He=ne*M,Be=a-u/P*(R/2-ee/24*(5+3*g+10*_-4*F-9*T))+He/720*(61+90*g+298*_+45*f-252*T-3*F);let Ct=(M-W/6*(1+2*g+_)+ne/120*(5-2*_+28*g-3*F+8*T+24*f))/c;return Ct=Et(Ct+G(Ae(e.number)),-Math.PI,Math.PI),[V(Ct),V(Be)]}const le=-80,he=84,In=-180,Ln=180;function Nn(i,t,e){i=Et(i,In,Ln),t<le?t=le:t>he&&(t=he);const n=G(t),s=Math.sin(n),r=Math.cos(n),o=s/r,a=o*o,l=a*a,h=G(i),c=Ae(e.number),u=G(c),g=nt/Math.sqrt(1-E*s**2),f=T*r**2,d=r*Et(h-u,-Math.PI,Math.PI),y=d*d,C=y*d,P=C*d,_=P*d,F=_*d,M=nt*(je*n-Fn*Math.sin(2*n)+xn*Math.sin(4*n)-Rn*Math.sin(6*n)),R=et*g*(d+C/6*(1-a+f)+_/120*(5-18*a+l+72*f-58*T))+5e5;let W=et*(M+g*o*(y/2+P/24*(5-a+9*f+4*f**2)+F/720*(61-58*a+l+600*f-330*T)));return e.north||(W+=1e7),[R,W]}function Ae(i){return(i-1)*6-180+3}const bn=[/^EPSG:(\d+)$/,/^urn:ogc:def:crs:EPSG::(\d+)$/,/^http:\/\/www\.opengis\.net\/def\/crs\/EPSG\/0\/(\d+)$/];function Ie(i){let t=0;for(const s of bn){const r=i.match(s);if(r){t=parseInt(r[1]);break}}if(!t)return null;let e=0,n=!1;return t>32700&&t<32761?e=t-32700:t>32600&&t<32661&&(n=!0,e=t-32600),e?{number:e,north:n}:null}function ce(i,t){return function(e,n,s,r){const o=e.length;s=s>1?s:2,r=r??s,n||(s>2?n=e.slice():n=new Array(o));for(let a=0;a<o;a+=r){const l=e[a],h=e[a+1],c=i(l,h,t);n[a]=c[0],n[a+1]=c[1]}return n}}function Xn(i){return Ie(i)?new Nt({code:i,units:"m"}):null}function On(i){const t=Ie(i.getCode());return t?{forward:ce(Nn,t),inverse:ce(An,t)}:null}const Yn=[On],kn=[Xn];let Rt=!0;function Un(i){Rt=!1}function Ot(i,t){if(t!==void 0){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];t=t}else t=i.slice();return t}function Di(i,t){if(t!==void 0&&i!==t){for(let e=0,n=i.length;e<n;++e)t[e]=i[e];i=t}return i}function St(i){wn(i.getCode(),i),j(i,i,Ot)}function Dn(i){i.forEach(St)}function p(i){if(typeof i!="string")return i;const t=En(i);if(t)return t;for(const e of kn){const n=e(i);if(n)return n}return null}function $i(i,t,e,n){i=p(i);let s;const r=i.getPointResolutionFunc();if(r){if(s=r(t,e),n&&n!==i.getUnits()){const o=i.getMetersPerUnit();o&&(s=s*o/Ft[n])}}else{const o=i.getUnits();if(o=="degrees"&&!n||n=="degrees")s=t;else{const a=Yt(i,p("EPSG:4326"));if(!a&&o!=="degrees")s=t*i.getMetersPerUnit();else{let h=[e[0]-t/2,e[1],e[0]+t/2,e[1],e[0],e[1]-t/2,e[0],e[1]+t/2];h=a(h,h,2);const c=wt(h.slice(0,2),h.slice(2,4)),u=wt(h.slice(4,6),h.slice(6,8));s=(c+u)/2}const l=n?Ft[n]:i.getMetersPerUnit();l!==void 0&&(s/=l)}}return s}function ue(i){Dn(i),i.forEach(function(t){i.forEach(function(e){t!==e&&j(t,e,Ot)})})}function $n(i,t,e,n){i.forEach(function(s){t.forEach(function(r){j(s,r,e),j(r,s,n)})})}function Wi(i,t){return i?typeof i=="string"?p(i):i:p(t)}function ge(i){return function(t,e,n,s){const r=t.length;n=n!==void 0?n:2,s=s??n,e=e!==void 0?e:new Array(r);for(let o=0;o<r;o+=s){const a=i(t.slice(o,o+n)),l=a.length;for(let h=0,c=s;h<c;++h)e[o+h]=h>=l?t[o+h]:a[h]}return e}}function qi(i,t,e,n){const s=p(i),r=p(t);j(s,r,ge(e)),j(r,s,ge(n))}function Ji(i,t){return Un(),qn(i,"EPSG:4326","EPSG:3857")}function Wn(i,t){if(i===t)return!0;const e=i.getUnits()===t.getUnits();return(i.getCode()===t.getCode()||Yt(i,t)===Ot)&&e}function Yt(i,t){const e=i.getCode(),n=t.getCode();let s=Pt(e,n);if(s)return s;let r=null,o=null;for(const l of Yn)r||(r=l(i)),o||(o=l(t));if(!r&&!o)return null;const a="EPSG:4326";if(o)if(r)s=Mt(r.inverse,o.forward);else{const l=Pt(e,a);l&&(s=Mt(l,o.forward))}else{const l=Pt(a,n);l&&(s=Mt(r.inverse,l))}return s&&(St(i),St(t),j(i,t,s)),s}function Mt(i,t){return function(e,n,s,r){return n=i(e,n,s,r),t(n,n,s,r)}}function q(i,t){const e=p(i),n=p(t);return Yt(e,n)}function qn(i,t,e){const n=q(t,e);if(!n){const s=p(t).getCode(),r=p(e).getCode();throw new Error(`No transform available between ${s} and ${r}`)}return n(i,void 0,i.length)}function Ki(i,t,e,n){const s=q(t,e);return Qe(i,s,void 0)}let Jn=null;function Zi(){return Jn}function zi(i,t){return i}function Hi(i,t){return Rt&&!gn(i,[0,0])&&i[0]>=-180&&i[0]<=180&&i[1]>=-90&&i[1]<=90&&(Rt=!1,mn("Call useGeographic() from ol/proj once to work with [longitude, latitude] coordinates.")),i}function Bi(i,t){return i}function Qi(i,t){return i}function Vi(i,t,e){return function(n){let s,r;if(i.canWrapX()){const o=i.getExtent(),a=Q(o);n=n.slice(0),r=Se(n,i,a),r&&(n[0]=n[0]-r*a),n[0]=ie(n[0],o[0],o[2]),n[1]=ie(n[1],o[1],o[3]),s=e(n)}else s=e(n);return r&&t.canWrapX()&&(s[0]+=r*Q(t.getExtent())),s}}function Kn(){ue(se),ue(oe),$n(oe,se,pn,Pn)}Kn();const Le=new Array(6);function Ne(){return[1,0,0,1,0,0]}function ts(i){return kt(i,1,0,0,1,0,0)}function be(i,t){const e=i[0],n=i[1],s=i[2],r=i[3],o=i[4],a=i[5],l=t[0],h=t[1],c=t[2],u=t[3],g=t[4],f=t[5];return i[0]=e*l+s*h,i[1]=n*l+r*h,i[2]=e*c+s*u,i[3]=n*c+r*u,i[4]=e*g+s*f+o,i[5]=n*g+r*f+a,i}function kt(i,t,e,n,s,r,o){return i[0]=t,i[1]=e,i[2]=n,i[3]=s,i[4]=r,i[5]=o,i}function es(i,t){return i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],i[4]=t[4],i[5]=t[5],i}function ns(i,t){const e=t[0],n=t[1];return t[0]=i[0]*e+i[2]*n+i[4],t[1]=i[1]*e+i[3]*n+i[5],t}function is(i,t,e){return be(i,kt(Le,t,0,0,e,0,0))}function ss(i,t,e){return be(i,kt(Le,1,0,0,1,t,e))}function Xe(i,t,e,n,s,r,o,a){const l=Math.sin(r),h=Math.cos(r);return i[0]=n*h,i[1]=s*l,i[2]=-n*l,i[3]=s*h,i[4]=o*n*h-a*n*l+t,i[5]=o*s*l+a*s*h+e,i}function rs(i,t){const e=Zn(t);Ce(e!==0,"Transformation matrix cannot be inverted");const n=t[0],s=t[1],r=t[2],o=t[3],a=t[4],l=t[5];return i[0]=o/e,i[1]=-s/e,i[2]=-r/e,i[3]=n/e,i[4]=(r*l-o*a)/e,i[5]=-(n*l-s*a)/e,i}function Zn(i){return i[0]*i[3]-i[1]*i[2]}const zn=[1e5,1e5,1e5,1e5,2,2];function os(i){return"matrix("+i.join(", ")+")"}function fe(i){return i.substring(7,i.length-1).split(",").map(parseFloat)}function as(i,t){const e=fe(i),n=fe(t);for(let s=0;s<6;++s)if(Math.round((e[s]-n[s])*zn[s])!==0)return!1;return!0}function Ut(i,t,e,n,s,r,o){r=r||[],o=o||2;let a=0;for(let l=t;l<e;l+=n){const h=i[l],c=i[l+1];r[a++]=s[0]*h+s[2]*c+s[4],r[a++]=s[1]*h+s[3]*c+s[5];for(let u=2;u<o;u++)r[a++]=i[l+u]}return r&&r.length!=a&&(r.length=a),r}function Hn(i,t,e,n,s,r,o){o=o||[];const a=Math.cos(s),l=Math.sin(s),h=r[0],c=r[1];let u=0;for(let g=t;g<e;g+=n){const f=i[g]-h,d=i[g+1]-c;o[u++]=h+f*a-d*l,o[u++]=c+f*l+d*a;for(let y=g+2;y<g+n;++y)o[u++]=i[y]}return o&&o.length!=u&&(o.length=u),o}function Bn(i,t,e,n,s,r,o,a){a=a||[];const l=o[0],h=o[1];let c=0;for(let u=t;u<e;u+=n){const g=i[u]-l,f=i[u+1]-h;a[c++]=l+s*g,a[c++]=h+r*f;for(let d=u+2;d<u+n;++d)a[c++]=i[d]}return a&&a.length!=c&&(a.length=c),a}function Qn(i,t,e,n,s,r,o){o=o||[];let a=0;for(let l=t;l<e;l+=n){o[a++]=i[l]+s,o[a++]=i[l+1]+r;for(let h=l+2;h<l+n;++h)o[a++]=i[h]}return o&&o.length!=a&&(o.length=a),o}const de=Ne(),Vn=[NaN,NaN];class Oe extends pe{constructor(){super(),this.extent_=At(),this.extentRevision_=-1,this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=0,this.simplifyTransformedInternal=Pe((t,e,n)=>{if(!n)return this.getSimplifiedGeometry(e);const s=this.clone();return s.applyTransform(n),s.getSimplifiedGeometry(e)})}simplifyTransformed(t,e){return this.simplifyTransformedInternal(this.getRevision(),t,e)}clone(){return m()}closestPointXY(t,e,n,s){return m()}containsXY(t,e){return this.closestPointXY(t,e,Vn,Number.MIN_VALUE)===0}getClosestPoint(t,e){return e=e||[NaN,NaN],this.closestPointXY(t[0],t[1],e,1/0),e}intersectsCoordinate(t){return this.containsXY(t[0],t[1])}computeExtent(t){return m()}getExtent(t){if(this.extentRevision_!=this.getRevision()){const e=this.computeExtent(this.extent_);(isNaN(e[0])||isNaN(e[1]))&&Me(e),this.extentRevision_=this.getRevision()}return Ve(this.extent_,t)}rotate(t,e){m()}scale(t,e,n){m()}simplify(t){return this.getSimplifiedGeometry(t*t)}getSimplifiedGeometry(t){return m()}getType(){return m()}applyTransform(t){m()}intersectsExtent(t){return m()}translate(t,e){m()}transform(t,e){const n=p(t),s=n.getUnits()=="tile-pixels"?function(r,o,a){const l=n.getExtent(),h=n.getWorldExtent(),c=tt(h)/tt(l);Xe(de,h[0],h[3],c,-c,0,0,0);const u=Ut(r,0,r.length,a,de,o),g=q(n,e);return g?g(u,u,a):u}:q(n,e);return this.applyTransform(s),this}}class L extends Oe{constructor(){super(),this.layout="XY",this.stride=2,this.flatCoordinates}computeExtent(t){return It(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinates(){return m()}getFirstCoordinate(){return this.flatCoordinates.slice(0,this.stride)}getFlatCoordinates(){return this.flatCoordinates}getLastCoordinate(){return this.flatCoordinates.slice(this.flatCoordinates.length-this.stride)}getLayout(){return this.layout}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<=this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=this.getSimplifiedGeometryInternal(t);return e.getFlatCoordinates().length<this.flatCoordinates.length?e:(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getSimplifiedGeometryInternal(t){return this}getStride(){return this.stride}setFlatCoordinates(t,e){this.stride=ye(t),this.layout=t,this.flatCoordinates=e}setCoordinates(t,e){m()}setLayout(t,e,n){let s;if(t)s=ye(t);else{for(let r=0;r<n;++r){if(e.length===0){this.layout="XY",this.stride=2;return}e=e[0]}s=e.length,t=N(s)}this.layout=t,this.stride=s}applyTransform(t){this.flatCoordinates&&(t(this.flatCoordinates,this.flatCoordinates,this.layout.startsWith("XYZ")?3:2,this.stride),this.changed())}rotate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Hn(n,0,n.length,s,t,e,n),this.changed()}}scale(t,e,n){e===void 0&&(e=t),n||(n=lt(this.getExtent()));const s=this.getFlatCoordinates();if(s){const r=this.getStride();Bn(s,0,s.length,r,t,e,n,s),this.changed()}}translate(t,e){const n=this.getFlatCoordinates();if(n){const s=this.getStride();Qn(n,0,n.length,s,t,e,n),this.changed()}}}function N(i){let t;return i==2?t="XY":i==3?t="XYZ":i==4&&(t="XYZM"),t}function ye(i){let t;return i=="XY"?t=2:i=="XYZ"||i=="XYM"?t=3:i=="XYZM"&&(t=4),t}function ls(i,t,e){const n=i.getFlatCoordinates();if(!n)return null;const s=i.getStride();return Ut(n,0,n.length,s,t,e)}function Ye(i,t,e,n){let s=0;const r=i[e-n],o=i[e-n+1];let a=0,l=0;for(;t<e;t+=n){const h=i[t]-r,c=i[t+1]-o;s+=l*h-a*c,a=h,l=c}return s/2}function ke(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=Ye(i,t,a,n),t=a}return s}function ti(i,t,e,n){let s=0;for(let r=0,o=e.length;r<o;++r){const a=e[r];s+=ke(i,t,a,n),t=a[a.length-1]}return s}function me(i,t,e,n,s,r,o){const a=i[t],l=i[t+1],h=i[e]-a,c=i[e+1]-l;let u;if(h===0&&c===0)u=t;else{const g=((s-a)*h+(r-l)*c)/(h*h+c*c);if(g>1)u=e;else if(g>0){for(let f=0;f<n;++f)o[f]=Lt(i[t+f],i[e+f],g);o.length=n;return}else u=t}for(let g=0;g<n;++g)o[g]=i[u+g];o.length=n}function Dt(i,t,e,n,s){let r=i[t],o=i[t+1];for(t+=n;t<e;t+=n){const a=i[t],l=i[t+1],h=Y(r,o,a,l);h>s&&(s=h),r=a,o=l}return s}function $t(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=Dt(i,t,a,n,s),t=a}return s}function ei(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];s=$t(i,t,a,n,s),t=a[a.length-1]}return s}function Wt(i,t,e,n,s,r,o,a,l,h,c){if(t==e)return h;let u,g;if(s===0){if(g=Y(o,a,i[t],i[t+1]),g<h){for(u=0;u<n;++u)l[u]=i[t+u];return l.length=n,g}return h}c=c||[NaN,NaN];let f=t+n;for(;f<e;)if(me(i,f-n,f,n,o,a,c),g=Y(o,a,c[0],c[1]),g<h){for(h=g,u=0;u<n;++u)l[u]=c[u];l.length=n,f+=n}else f+=n*Math.max((Math.sqrt(g)-Math.sqrt(h))/s|0,1);if(r&&(me(i,e-n,t,n,o,a,c),g=Y(o,a,c[0],c[1]),g<h)){for(h=g,u=0;u<n;++u)l[u]=c[u];l.length=n}return h}function qt(i,t,e,n,s,r,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,g=e.length;u<g;++u){const f=e[u];h=Wt(i,t,f,n,s,r,o,a,l,h,c),t=f}return h}function ni(i,t,e,n,s,r,o,a,l,h,c){c=c||[NaN,NaN];for(let u=0,g=e.length;u<g;++u){const f=e[u];h=qt(i,t,f,n,s,r,o,a,l,h,c),t=f[f.length-1]}return h}function ii(i,t,e,n){for(let s=0,r=e.length;s<r;++s)i[t++]=e[s];return t}function gt(i,t,e,n){for(let s=0,r=e.length;s<r;++s){const o=e[s];for(let a=0;a<n;++a)i[t++]=o[a]}return t}function Z(i,t,e,n,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=gt(i,t,e[o],n);s[r++]=l,t=l}return s.length=r,s}function Ue(i,t,e,n,s){s=s||[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=Z(i,t,e[o],n,s[r]);l.length===0&&(l[0]=t),s[r++]=l,t=l[l.length-1]}return s.length=r,s}function ft(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=t;o<e;o+=n)s[r++]=i.slice(o,o+n);return s.length=r,s}function Jt(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=ft(i,t,l,n,s[r]),t=l}return s.length=r,s}function si(i,t,e,n,s){s=s!==void 0?s:[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o];s[r++]=l.length===1&&l[0]===t?[]:Jt(i,t,l,n,s[r]),t=l[l.length-1]}return s.length=r,s}function dt(i,t,e,n,s,r,o){const a=(e-t)/n;if(a<3){for(;t<e;t+=n)r[o++]=i[t],r[o++]=i[t+1];return o}const l=new Array(a);l[0]=1,l[a-1]=1;const h=[t,e-n];let c=0;for(;h.length>0;){const u=h.pop(),g=h.pop();let f=0;const d=i[g],y=i[g+1],C=i[u],P=i[u+1];for(let _=g+n;_<u;_+=n){const F=i[_],M=i[_+1],R=tn(F,M,d,y,C,P);R>f&&(c=_,f=R)}f>s&&(l[(c-t)/n]=1,g+n<c&&h.push(g,c),c+n<u&&h.push(c,u))}for(let u=0;u<a;++u)l[u]&&(r[o++]=i[t+u*n],r[o++]=i[t+u*n+1]);return o}function De(i,t,e,n,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const c=e[l];o=dt(i,t,c,n,s,r,o),a.push(o),t=c}return o}function X(i,t){return t*Math.round(i/t)}function ri(i,t,e,n,s,r,o){if(t==e)return o;let a=X(i[t],s),l=X(i[t+1],s);t+=n,r[o++]=a,r[o++]=l;let h,c;do if(h=X(i[t],s),c=X(i[t+1],s),t+=n,t==e)return r[o++]=h,r[o++]=c,o;while(h==a&&c==l);for(;t<e;){const u=X(i[t],s),g=X(i[t+1],s);if(t+=n,u==h&&g==c)continue;const f=h-a,d=c-l,y=u-a,C=g-l;if(f*C==d*y&&(f<0&&y<f||f==y||f>0&&y>f)&&(d<0&&C<d||d==C||d>0&&C>d)){h=u,c=g;continue}r[o++]=h,r[o++]=c,a=h,l=c,h=u,c=g}return r[o++]=h,r[o++]=c,o}function Kt(i,t,e,n,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const c=e[l];o=ri(i,t,c,n,s,r,o),a.push(o),t=c}return o}function oi(i,t,e,n,s,r,o,a){for(let l=0,h=e.length;l<h;++l){const c=e[l],u=[];o=Kt(i,t,c,n,s,r,o,u),a.push(u),t=c[c.length-1]}return o}class J extends L{constructor(t,e){super(),this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}clone(){return new J(this.flatCoordinates.slice(),this.layout)}closestPointXY(t,e,n,s){return s<I(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Dt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!0,t,e,n,s))}getArea(){return Ye(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinates(){return ft(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getSimplifiedGeometryInternal(t){const e=[];return e.length=dt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new J(e,"XY")}getType(){return"LinearRing"}intersectsExtent(t){return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gt(this.flatCoordinates,0,t,this.stride),this.changed()}}class D extends L{constructor(t,e){super(),this.setCoordinates(t,e)}clone(){const t=new D(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){const r=this.flatCoordinates,o=Y(t,e,r[0],r[1]);if(o<s){const a=this.stride;for(let l=0;l<a;++l)n[l]=r[l];return n.length=a,o}return s}getCoordinates(){return this.flatCoordinates.slice()}computeExtent(t){return Ge(this.flatCoordinates,t)}getType(){return"Point"}intersectsExtent(t){return Ee(t,this.flatCoordinates[0],this.flatCoordinates[1])}setCoordinates(t,e){this.setLayout(e,t,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=ii(this.flatCoordinates,0,t,this.stride),this.changed()}}function ai(i,t,e,n,s){return!en(s,function(o){return!v(i,t,e,n,o[0],o[1])})}function v(i,t,e,n,s,r){let o=0,a=i[e-n],l=i[e-n+1];for(;t<e;t+=n){const h=i[t],c=i[t+1];l<=r?c>r&&(h-a)*(r-l)-(s-a)*(c-l)>0&&o++:c<=r&&(h-a)*(r-l)-(s-a)*(c-l)<0&&o--,a=h,l=c}return o!==0}function Zt(i,t,e,n,s,r){if(e.length===0||!v(i,t,e[0],n,s,r))return!1;for(let o=1,a=e.length;o<a;++o)if(v(i,e[o-1],e[o],n,s,r))return!1;return!0}function li(i,t,e,n,s,r){if(e.length===0)return!1;for(let o=0,a=e.length;o<a;++o){const l=e[o];if(Zt(i,t,l,n,s,r))return!0;t=l[l.length-1]}return!1}function zt(i,t,e,n,s,r,o){let a,l,h,c,u,g,f;const d=s[r+1],y=[];for(let _=0,F=e.length;_<F;++_){const M=e[_];for(c=i[M-n],g=i[M-n+1],a=t;a<M;a+=n)u=i[a],f=i[a+1],(d<=g&&f<=d||g<=d&&d<=f)&&(h=(d-g)/(f-g)*(u-c)+c,y.push(h)),c=u,g=f}let C=NaN,P=-1/0;for(y.sort(nn),c=y[0],a=1,l=y.length;a<l;++a){u=y[a];const _=Math.abs(u-c);_>P&&(h=(c+u)/2,Zt(i,t,e,n,h,d)&&(C=h,P=_)),c=u}return isNaN(C)&&(C=s[r]),o?(o.push(C,d,P),o):[C,d,P]}function $e(i,t,e,n,s){let r=[];for(let o=0,a=e.length;o<a;++o){const l=e[o];r=zt(i,t,l,n,s,2*o,r),t=l[l.length-1]}return r}function We(i,t,e,n,s){let r;for(t+=n;t<e;t+=n)if(r=s(i.slice(t-n,t),i.slice(t,t+n)),r)return r;return!1}function yt(i,t,e,n,s,r){return r=r??sn(At(),i,t,e,n),rn(s,r)?r[0]>=s[0]&&r[2]<=s[2]||r[1]>=s[1]&&r[3]<=s[3]?!0:We(i,t,e,n,function(o,a){return on(s,o,a)}):!1}function hi(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){if(yt(i,t,e[r],n,s))return!0;t=e[r]}return!1}function ci(i,t,e,n,s){return!!(yt(i,t,e,n,s)||v(i,t,e,n,s[0],s[1])||v(i,t,e,n,s[0],s[3])||v(i,t,e,n,s[2],s[1])||v(i,t,e,n,s[2],s[3]))}function qe(i,t,e,n,s){if(!ci(i,t,e[0],n,s))return!1;if(e.length===1)return!0;for(let r=1,o=e.length;r<o;++r)if(ai(i,e[r-1],e[r],n,s)&&!yt(i,e[r-1],e[r],n,s))return!1;return!0}function ui(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(qe(i,t,a,n,s))return!0;t=a[a.length-1]}return!1}function gi(i,t,e,n){for(;t<e-n;){for(let s=0;s<n;++s){const r=i[t+s];i[t+s]=i[e-n+s],i[e-n+s]=r}t+=n,e-=n}}function Ht(i,t,e,n){let s=0,r=i[e-n],o=i[e-n+1];for(;t<e;t+=n){const a=i[t],l=i[t+1];s+=(a-r)*(l+o),r=a,o=l}return s===0?void 0:s>0}function Bt(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=Ht(i,t,a,n);if(r===0){if(s&&l||!s&&!l)return!1}else if(s&&!l||!s&&l)return!1;t=a}return!0}function Je(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r){const a=e[r];if(!Bt(i,t,a,n,s))return!1;a.length&&(t=a[a.length-1])}return!0}function it(i,t,e,n,s){s=s!==void 0?s:!1;for(let r=0,o=e.length;r<o;++r){const a=e[r],l=Ht(i,t,a,n);(r===0?s&&l||!s&&!l:s&&!l||!s&&l)&&gi(i,t,a,n),t=a}return t}function Tt(i,t,e,n,s){for(let r=0,o=e.length;r<o;++r)t=it(i,t,e[r],n,s);return t}function fi(i,t){const e=[];let n=0,s=0,r;for(let o=0,a=t.length;o<a;++o){const l=t[o],h=Ht(i,n,l,2);if(r===void 0&&(r=h),h===r)e.push(t.slice(s,o+1));else{if(e.length===0)continue;e[e.length-1].push(t[s])}s=o+1,n=l}return e}class x extends L{constructor(t,e,n){super(),this.ends_=[],this.flatInteriorPointRevision_=-1,this.flatInteriorPoint_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,e!==void 0&&n?(this.setFlatCoordinates(e,t),this.ends_=n):this.setCoordinates(t,e)}appendLinearRing(t){this.flatCoordinates?w(this.flatCoordinates,t.getFlatCoordinates()):this.flatCoordinates=t.getFlatCoordinates().slice(),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new x(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<I(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($t(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qt(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return Zt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,e)}getArea(){return ke(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),it(e,0,this.ends_,this.stride,t)):e=this.flatCoordinates,Jt(e,0,this.ends_,this.stride)}getEnds(){return this.ends_}getFlatInteriorPoint(){if(this.flatInteriorPointRevision_!=this.getRevision()){const t=lt(this.getExtent());this.flatInteriorPoint_=zt(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t,0),this.flatInteriorPointRevision_=this.getRevision()}return this.flatInteriorPoint_}getInteriorPoint(){return new D(this.getFlatInteriorPoint(),"XYM")}getLinearRingCount(){return this.ends_.length}getLinearRing(t){return t<0||this.ends_.length<=t?null:new J(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLinearRings(){const t=this.layout,e=this.flatCoordinates,n=this.ends_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o],h=new J(e.slice(r,l),t);s.push(h),r=l}return s}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Bt(t,0,this.ends_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=it(this.orientedFlatCoordinates_,0,this.ends_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=Kt(this.flatCoordinates,0,this.ends_,this.stride,Math.sqrt(t),e,0,n),new x(e,"XY",n)}getType(){return"Polygon"}intersectsExtent(t){return qe(this.getOrientedFlatCoordinates(),0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Z(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}function hs(i,t,e,n){e=e||32;const s=[];for(let r=0;r<e;++r)w(s,yn(i,t,2*Math.PI*r/e,n));return s.push(s[0],s[1]),new x(s,"XY",[s.length])}function cs(i){if(an(i))throw new Error("Cannot create polygon from empty extent");const t=i[0],e=i[1],n=i[2],s=i[3],r=[t,e,t,s,n,s,n,e,t,e];return new x(r,"XY",[r.length])}class mt extends pe{constructor(t){if(super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t)if(typeof t.getSimplifiedGeometry=="function"){const e=t;this.setGeometry(e)}else{const e=t;this.setProperties(e)}}clone(){const t=new mt(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());const e=this.getGeometry();e&&t.setGeometry(e.clone());const n=this.getStyle();return n&&t.setStyle(n),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&(we(this.geometryChangeKey_),this.geometryChangeKey_=null);const t=this.getGeometry();t&&(this.geometryChangeKey_=Fe(t,xe.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){this.style_=t,this.styleFunction_=t?di(t):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}function di(i){if(typeof i=="function")return i;let t;return Array.isArray(i)?t=i:(Ce(typeof i.getZIndex=="function","Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),t=[i]),function(){return t}}class st extends Oe{constructor(t){super(),this.geometries_=t,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(we),this.changeEventsKeys_.length=0}listenGeometriesChange_(){const t=this.geometries_;for(let e=0,n=t.length;e<n;++e)this.changeEventsKeys_.push(Fe(t[e],xe.CHANGE,this.changed,this))}clone(){const t=new st(Gt(this.geometries_));return t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<I(this.getExtent(),t,e))return s;const r=this.geometries_;for(let o=0,a=r.length;o<a;++o)s=r[o].closestPointXY(t,e,n,s);return s}containsXY(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)if(n[s].containsXY(t,e))return!0;return!1}computeExtent(t){Me(t);const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)ln(t,e[n].getExtent());return t}getGeometries(){return Gt(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[];const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)e[n].getType()===this.getType()?t=t.concat(e[n].getGeometriesArrayRecursive()):t.push(e[n]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||this.simplifiedGeometryMaxMinSquaredTolerance!==0&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;const e=[],n=this.geometries_;let s=!1;for(let r=0,o=n.length;r<o;++r){const a=n[r],l=a.getSimplifiedGeometry(t);e.push(l),l!==a&&(s=!0)}return s?new st(e):(this.simplifiedGeometryMaxMinSquaredTolerance=t,this)}getType(){return"GeometryCollection"}intersectsExtent(t){const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)if(e[n].intersectsExtent(t))return!0;return!1}isEmpty(){return this.geometries_.length===0}rotate(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].rotate(t,e);this.changed()}scale(t,e,n){n||(n=lt(this.getExtent()));const s=this.geometries_;for(let r=0,o=s.length;r<o;++r)s[r].scale(t,e,n);this.changed()}setGeometries(t){this.setGeometriesArray(Gt(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){const e=this.geometries_;for(let n=0,s=e.length;n<s;++n)e[n].applyTransform(t);this.changed()}translate(t,e){const n=this.geometries_;for(let s=0,r=n.length;s<r;++s)n[s].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function Gt(i){return i.map(t=>t.clone())}function rt(i,t,e,n,s,r,o){let a,l;const h=(e-t)/n;if(h===1)a=t;else if(h===2)a=t,l=s;else if(h!==0){let c=i[t],u=i[t+1],g=0;const f=[0];for(let C=t+n;C<e;C+=n){const P=i[C],_=i[C+1];g+=Math.sqrt((P-c)*(P-c)+(_-u)*(_-u)),f.push(g),c=P,u=_}const d=s*g,y=hn(f,d);y<0?(l=(d-f[-y-2])/(f[-y-1]-f[-y-2]),a=t+(-y-2)*n):a=t+y*n}o=o>1?o:2,r=r||new Array(o);for(let c=0;c<o;++c)r[c]=a===void 0?NaN:l===void 0?i[a+c]:Lt(i[a+c],i[a+n+c],l);return r}function vt(i,t,e,n,s,r){if(e==t)return null;let o;if(s<i[t+n-1])return r?(o=i.slice(t,t+n),o[n-1]=s,o):null;if(i[e-1]<s)return r?(o=i.slice(e-n,e),o[n-1]=s,o):null;if(s==i[t+n-1])return i.slice(t,t+n);let a=t/n,l=e/n;for(;a<l;){const g=a+l>>1;s<i[(g+1)*n-1]?l=g:a=g+1}const h=i[a*n-1];if(s==h)return i.slice((a-1)*n,(a-1)*n+n);const c=i[(a+1)*n-1],u=(s-h)/(c-h);o=[];for(let g=0;g<n-1;++g)o.push(Lt(i[(a-1)*n+g],i[a*n+g],u));return o.push(s),o}function yi(i,t,e,n,s,r,o){if(o)return vt(i,t,e[e.length-1],n,s,r);let a;if(s<i[n-1])return r?(a=i.slice(0,n),a[n-1]=s,a):null;if(i[i.length-1]<s)return r?(a=i.slice(i.length-n),a[n-1]=s,a):null;for(let l=0,h=e.length;l<h;++l){const c=e[l];if(t!=c){if(s<i[t+n-1])return null;if(s<=i[c-1])return vt(i,t,c,n,s,!1);t=c}}return null}function Ke(i,t,e,n){let s=i[t],r=i[t+1],o=0;for(let a=t+n;a<e;a+=n){const l=i[a],h=i[a+1];o+=Math.sqrt((l-s)*(l-s)+(h-r)*(h-r)),s=l,r=h}return o}class $ extends L{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,e!==void 0&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendCoordinate(t){w(this.flatCoordinates,t),this.changed()}clone(){const t=new $(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<I(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(Dt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),Wt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,n,s))}forEachSegment(t){return We(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return this.layout!="XYM"&&this.layout!="XYZM"?null:(e=e!==void 0?e:!1,vt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return ft(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return rt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return Ke(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){const e=[];return e.length=dt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new $(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return yt(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,this.getExtent())}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gt(this.flatCoordinates,0,t,this.stride),this.changed()}}class ot extends L{constructor(t,e,n){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(e!==void 0&&n)this.setFlatCoordinates(e,t),this.ends_=n;else{const s=t,r=[],o=[];for(let l=0,h=s.length;l<h;++l){const c=s[l];w(r,c.getFlatCoordinates()),o.push(r.length)}const a=s.length===0?this.getLayout():s[0].getLayout();this.setFlatCoordinates(a,r),this.ends_=o}}appendLineString(t){w(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){const t=new ot(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,n,s){return s<I(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt($t(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),qt(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,n,s))}getCoordinateAtM(t,e,n){return this.layout!="XYM"&&this.layout!="XYZM"||this.flatCoordinates.length===0?null:(e=e!==void 0?e:!1,n=n!==void 0?n:!1,yi(this.flatCoordinates,0,this.ends_,this.stride,t,e,n))}getCoordinates(){return Jt(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new $(this.flatCoordinates.slice(t===0?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){const t=this.flatCoordinates,e=this.ends_,n=this.layout,s=[];let r=0;for(let o=0,a=e.length;o<a;++o){const l=e[o],h=new $(t.slice(r,l),n);s.push(h),r=l}return s}getLength(){const t=this.ends_;let e=0,n=0;for(let s=0,r=t.length;s<r;++s)n+=Ke(this.flatCoordinates,e,t[s],this.stride),e=t[s];return n}getFlatMidpoints(){const t=[],e=this.flatCoordinates;let n=0;const s=this.ends_,r=this.stride;for(let o=0,a=s.length;o<a;++o){const l=s[o],h=rt(e,n,l,r,.5);w(t,h),n=l}return t}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=De(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,n),new ot(e,"XY",n)}getType(){return"MultiLineString"}intersectsExtent(t){return hi(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);const n=Z(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=n.length===0?0:n[n.length-1],this.changed()}}class _t extends L{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){w(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){const t=new _t(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,n,s){if(s<I(this.getExtent(),t,e))return s;const r=this.flatCoordinates,o=this.stride;for(let a=0,l=r.length;a<l;a+=o){const h=Y(t,e,r[a],r[a+1]);if(h<s){s=h;for(let c=0;c<o;++c)n[c]=r[a+c];n.length=o}}return s}getCoordinates(){return ft(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){const e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new D(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){const t=this.flatCoordinates,e=this.layout,n=this.stride,s=[];for(let r=0,o=t.length;r<o;r+=n){const a=new D(t.slice(r,r+n),e);s.push(a)}return s}getType(){return"MultiPoint"}intersectsExtent(t){const e=this.flatCoordinates,n=this.stride;for(let s=0,r=e.length;s<r;s+=n){const o=e[s],a=e[s+1];if(Ee(t,o,a))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=gt(this.flatCoordinates,0,t,this.stride),this.changed()}}function Ze(i,t,e,n){const s=[];let r=At();for(let o=0,a=e.length;o<a;++o){const l=e[o];r=It(i,t,l[0],n),s.push((r[0]+r[2])/2,(r[1]+r[3])/2),t=l[l.length-1]}return s}class at extends L{constructor(t,e,n){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!n&&!Array.isArray(t[0])){const s=t,r=[],o=[];for(let a=0,l=s.length;a<l;++a){const h=s[a],c=r.length,u=h.getEnds();for(let g=0,f=u.length;g<f;++g)u[g]+=c;w(r,h.getFlatCoordinates()),o.push(u)}e=s.length===0?this.getLayout():s[0].getLayout(),t=r,n=o}e!==void 0&&n?(this.setFlatCoordinates(e,t),this.endss_=n):this.setCoordinates(t,e)}appendPolygon(t){let e;if(!this.flatCoordinates)this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();else{const n=this.flatCoordinates.length;w(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let s=0,r=e.length;s<r;++s)e[s]+=n}this.endss_.push(e),this.changed()}clone(){const t=this.endss_.length,e=new Array(t);for(let s=0;s<t;++s)e[s]=this.endss_[s].slice();const n=new at(this.flatCoordinates.slice(),this.layout,e);return n.applyProperties(this),n}closestPointXY(t,e,n,s){return s<I(this.getExtent(),t,e)?s:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt(ei(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),ni(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,n,s))}containsXY(t,e){return li(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return ti(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return t!==void 0?(e=this.getOrientedFlatCoordinates().slice(),Tt(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,si(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){const t=Ze(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=$e(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new _t(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){const t=this.flatCoordinates;Je(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=Tt(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){const e=[],n=[];return e.length=oi(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,n),new at(e,"XY",n)}getPolygon(t){if(t<0||this.endss_.length<=t)return null;let e;if(t===0)e=0;else{const r=this.endss_[t-1];e=r[r.length-1]}const n=this.endss_[t].slice(),s=n[n.length-1];if(e!==0)for(let r=0,o=n.length;r<o;++r)n[r]-=e;return new x(this.flatCoordinates.slice(e,s),this.layout,n)}getPolygons(){const t=this.layout,e=this.flatCoordinates,n=this.endss_,s=[];let r=0;for(let o=0,a=n.length;o<a;++o){const l=n[o].slice(),h=l[l.length-1];if(r!==0)for(let u=0,g=l.length;u<g;++u)l[u]-=r;const c=new x(e.slice(r,h),t,l);s.push(c),r=h}return s}getType(){return"MultiPolygon"}intersectsExtent(t){return ui(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);const n=Ue(this.flatCoordinates,0,t,this.stride,this.endss_);if(n.length===0)this.flatCoordinates.length=0;else{const s=n[n.length-1];this.flatCoordinates.length=s.length===0?0:s[s.length-1]}this.changed()}}const _e=Ne();class A{constructor(t,e,n,s,r,o){this.styleFunction,this.extent_,this.id_=o,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=n||null,this.properties_=r,this.squaredTolerance_,this.stride_=s,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_=this.type_==="Point"?Ge(this.flatCoordinates_):It(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){const t=lt(this.getExtent());this.flatInteriorPoints_=zt(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){const t=fi(this.flatCoordinates_,this.ends_),e=Ze(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=$e(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=rt(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];const t=this.flatCoordinates_;let e=0;const n=this.ends_;for(let s=0,r=n.length;s<r;++s){const o=n[s],a=rt(t,e,o,2,.5);w(this.flatMidpoints_,a),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){t=p(t);const e=t.getExtent(),n=t.getWorldExtent();if(e&&n){const s=tt(n)/tt(e);Xe(_e,n[0],n[3],s,-s,0,0,0),Ut(this.flatCoordinates_,0,this.flatCoordinates_.length,2,_e,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){var t;return new A(this.type_,this.flatCoordinates_.slice(),(t=this.ends_)==null?void 0:t.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=Pe((t,e)=>{if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);const n=this.simplifiedGeometry_.getFlatCoordinates();let s;switch(this.type_){case"LineString":n.length=dt(n,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,n,0),s=[n.length];break;case"MultiLineString":s=[],n.length=De(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,n,0,s);break;case"Polygon":s=[],n.length=Kt(n,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),n,0,s);break}return s&&(this.simplifiedGeometry_=new A(this.type_,n,s,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}A.prototype.getFlatCoordinates=A.prototype.getOrientedFlatCoordinates;class mi{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=mt,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let n=e.dataProjection?p(e.dataProjection):this.readProjection(t);e.extent&&n&&n.getUnits()==="tile-pixels"&&(n=p(n),n.setWorldExtent(e.extent)),e={dataProjection:n,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return m()}readFeature(t,e){return m()}readFeatures(t,e){return m()}readGeometry(t,e){return m()}readProjection(t){return m()}writeFeature(t,e){return m()}writeFeatures(t,e){return m()}writeGeometry(t,e){return m()}}function Qt(i,t,e){const n=e?p(e.featureProjection):null,s=e?p(e.dataProjection):null;let r=i;if(n&&s&&!Wn(n,s)){t&&(r=i.clone());const o=t?n:s,a=t?s:n;o.getUnits()==="tile-pixels"?r.transform(o,a):r.applyTransform(q(o,a))}if(t&&e&&e.decimals!==void 0){const o=Math.pow(10,e.decimals),a=function(l){for(let h=0,c=l.length;h<c;++h)l[h]=Math.round(l[h]*o)/o;return l};r===i&&(r=i.clone()),r.applyTransform(a)}return r}const _i={Point:D,LineString:$,Polygon:x,MultiPoint:_t,MultiLineString:ot,MultiPolygon:at};function Ci(i,t,e){return Array.isArray(t[0])?(Je(i,0,t,e)||(i=i.slice(),Tt(i,0,t,e)),i):(Bt(i,0,t,e)||(i=i.slice(),it(i,0,t,e)),i)}function ze(i,t){var r;const e=i.geometry;if(!e)return[];if(Array.isArray(e))return e.map(o=>ze({...i,geometry:o})).flat();const n=e.type==="MultiPolygon"?"Polygon":e.type;if(n==="GeometryCollection"||n==="Circle")throw new Error("Unsupported geometry type: "+n);const s=e.layout.length;return Qt(new A(n,n==="Polygon"?Ci(e.flatCoordinates,e.ends,s):e.flatCoordinates,(r=e.ends)==null?void 0:r.flat(),s,i.properties||{},i.id).enableSimplifyTransformed(),!1,t)}function Vt(i,t){if(!i)return null;if(Array.isArray(i)){const n=i.map(s=>Vt(s,t));return new st(n)}const e=_i[i.type];return Qt(new e(i.flatCoordinates,i.layout||"XY",i.ends),!1,t)}class pi extends mi{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(B(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(B(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return m()}readFeaturesFromObject(t,e){return m()}readGeometry(t,e){return this.readGeometryFromObject(B(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return m()}readProjection(t){return this.readProjectionFromObject(B(t))}readProjectionFromObject(t){return m()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return m()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return m()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return m()}}function B(i){if(typeof i=="string"){const t=JSON.parse(i);return t||null}return i!==null?i:null}class us extends pi{constructor(t){t=t||{},super(),this.dataProjection=p(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=p(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let n=null;t.type==="Feature"?n=t:n={type:"Feature",geometry:t,properties:null};const s=te(n.geometry);if(this.featureClass===A)return ze({geometry:s,id:n.id,properties:n.properties},e);const r=new mt;return this.geometryName_?r.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.geometry_name&&r.setGeometryName(n.geometry_name),r.setGeometry(Vt(s,e)),"id"in n&&r.setId(n.id),n.properties&&r.setProperties(n.properties,!0),r}readFeaturesFromObject(t,e){const n=t;let s=null;if(n.type==="FeatureCollection"){const r=t;s=[];const o=r.features;for(let a=0,l=o.length;a<l;++a){const h=this.readFeatureFromObject(o[a],e);h&&s.push(h)}}else s=[this.readFeatureFromObject(t,e)];return s.flat()}readGeometryFromObject(t,e){return Pi(t,e)}readProjectionFromObject(t){const e=t.crs;let n;if(e)if(e.type=="name")n=p(e.properties.name);else if(e.type==="EPSG")n=p("EPSG:"+e.properties.code);else throw new Error("Unknown SRS type");else n=this.dataProjection;return n}writeFeatureObject(t,e){e=this.adaptOptions(e);const n={type:"Feature",geometry:null,properties:null},s=t.getId();if(s!==void 0&&(n.id=s),!t.hasProperties())return n;const r=t.getProperties(),o=t.getGeometry();return o&&(n.geometry=jt(o,e),delete r[t.getGeometryName()]),cn(r)||(n.properties=r),n}writeFeaturesObject(t,e){e=this.adaptOptions(e);const n=[];for(let s=0,r=t.length;s<r;++s)n.push(this.writeFeatureObject(t[s],e));return{type:"FeatureCollection",features:n}}writeGeometryObject(t,e){return jt(t,this.adaptOptions(e))}}function te(i,t){if(!i)return null;let e;switch(i.type){case"Point":{e=Gi(i);break}case"LineString":{e=Ei(i);break}case"Polygon":{e=Ri(i);break}case"MultiPoint":{e=Fi(i);break}case"MultiLineString":{e=wi(i);break}case"MultiPolygon":{e=xi(i);break}case"GeometryCollection":{e=Mi(i);break}default:throw new Error("Unsupported GeoJSON type: "+i.type)}return e}function Pi(i,t){const e=te(i);return Vt(e,t)}function Mi(i,t){return i.geometries.map(function(n){return te(n)})}function Gi(i){const t=i.coordinates;return{type:"Point",flatCoordinates:t,layout:N(t.length)}}function Ei(i){var n;const t=i.coordinates,e=t.flat();return{type:"LineString",flatCoordinates:e,ends:[e.length],layout:N(((n=t[0])==null?void 0:n.length)||2)}}function wi(i){var r,o;const t=i.coordinates,e=((o=(r=t[0])==null?void 0:r[0])==null?void 0:o.length)||2,n=[],s=Z(n,0,t,e);return{type:"MultiLineString",flatCoordinates:n,ends:s,layout:N(e)}}function Fi(i){var e;const t=i.coordinates;return{type:"MultiPoint",flatCoordinates:t.flat(),layout:N(((e=t[0])==null?void 0:e.length)||2)}}function xi(i){var r,o;const t=i.coordinates,e=[],n=((o=(r=t[0])==null?void 0:r[0])==null?void 0:o[0].length)||2,s=Ue(e,0,t,n);return{type:"MultiPolygon",flatCoordinates:e,ends:s,layout:N(n)}}function Ri(i){var r,o;const t=i.coordinates,e=[],n=(o=(r=t[0])==null?void 0:r[0])==null?void 0:o.length,s=Z(e,0,t,n);return{type:"Polygon",flatCoordinates:e,ends:s,layout:N(n)}}function jt(i,t){i=Qt(i,!0,t);const e=i.getType();let n;switch(e){case"Point":{n=Ii(i);break}case"LineString":{n=Ti(i);break}case"Polygon":{n=Li(i,t);break}case"MultiPoint":{n=ji(i);break}case"MultiLineString":{n=vi(i);break}case"MultiPolygon":{n=Ai(i,t);break}case"GeometryCollection":{n=Si(i,t);break}case"Circle":{n={type:"GeometryCollection",geometries:[]};break}default:throw new Error("Unsupported geometry type: "+e)}return n}function Si(i,t){return t=Object.assign({},t),delete t.featureProjection,{type:"GeometryCollection",geometries:i.getGeometriesArray().map(function(n){return jt(n,t)})}}function Ti(i,t){return{type:"LineString",coordinates:i.getCoordinates()}}function vi(i,t){return{type:"MultiLineString",coordinates:i.getCoordinates()}}function ji(i,t){return{type:"MultiPoint",coordinates:i.getCoordinates()}}function Ai(i,t){let e;return t&&(e=t.rightHanded),{type:"MultiPolygon",coordinates:i.getCoordinates(e)}}function Ii(i,t){return{type:"Point",coordinates:i.getCoordinates()}}function Li(i,t){let e;return t&&(e=t.rightHanded),{type:"Polygon",coordinates:i.getCoordinates(e)}}export{mi as $,ls as A,Yt as B,Zi as C,as as D,os as E,p as F,Re as G,Yi as H,mt as I,D as J,ye as K,$ as L,Ft as M,_t as N,ot as O,x as P,at as Q,A as R,L as S,st as T,un as U,ki as V,fn as W,dn as X,us as Y,pi as Z,Qt as _,Qi as a,En as a0,St as a1,Nt as a2,Pt as a3,ue as a4,qi as a5,Vi as a6,qn as a7,Ki as a8,Ji as a9,fi as aa,$i as ab,ge as ac,q as ad,be as ae,is as af,ts as ag,ss as ah,Wn as ai,ci as aj,Di as ak,hs as al,bi as b,Wi as c,Bi as d,cs as e,Hi as f,gn as g,Un as h,Xe as i,Ne as j,ns as k,mn as l,rs as m,ii as n,Hn as o,ft as p,Jt as q,Xi as r,Oi as s,zi as t,si as u,X as v,Ui as w,Ut as x,es as y,Ke as z};
